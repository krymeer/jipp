declare
Msg1 = 'ping'
Msg2 = 'pong'

proc {Ping L Id}
   {Browse Id#{List.last L}}
   {Delay 2000}
   {Ping {Append L Msg1|nil} Id}
end

proc {Pong L Id}
   {Browse Id#{List.last L}}
   {Delay 2000}
   {Pong {Append L Msg2|nil} Id}
end

proc {Game Id1 Id2}
   local L in
      L = Msg1|nil
      thread {Delay 1000} {Pong {Append L Msg2|nil} Id2} end
      thread {Ping L Id1} end
   end
end

{Game 'p1' 'p2'}